{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observe/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function isObject (data){\n  return typeof data === 'object' && data !== 'null'\n}\n\n\n","// 把 data 中数据 都是用 object.defineProperty 不能兼容 IE8 以下 Vue2 \nimport { isObject } from '../util/index'\n\nclass Observe{\n  constructor(value){\n    // vue 如果数据层次过多，需要递归的去解析 对象的属性 依次增加 set 和 get 方法\n    // vue3 使用了 proxy 提高了性能\n    this.walk(value)\n  }\n\n  walk(data){\n    let keys = Object.keys(data);\n    keys.forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n}\n\nfunction defineReactive(data, key, value){\n  observe(value) // 递归实现深度检测\n   Object.defineProperty(data, key, {\n     get(){\n      return value\n     },\n     set(newValue){\n        if(newValue === value) return \n        observe(newValue) //用户设置的也可能是对象\n        console.log(\"值发生变化了\")\n        value = newValue\n     }\n   })\n}\n\n\nexport function observe(data){\n  let isObj = isObject(data)\n  if(!isObj){\n    return ;\n  }\n\n  return new Observe(data)\n\n}","import {observe} from './observe/index'\n\nexport function initState(vm){\n  const opts = vm.$options\n  // console.log(opts)\n  // vue 的数据来源 属性 方法 数据 计算属性 watch\n  if(opts.props){\n    initProps(vm) \n  }\n  if(opts.methods){\n    initMethod(vm)\n  }\n  if(opts.data){\n    initData(vm)\n  }\n  if(opts.computed){\n    initComputed(vm)\n  }\n  if(opts.watch){\n    initWatch(vm)\n  }\n}\n\nfunction initProps(){}\nfunction initMethod(){}\nfunction initData(vm){\n  // console.log(vm.$options.data)\n  let data = vm.$options.data\n  data = typeof data == 'function' ? data.call(vm) : data\n  vm._data = data\n  // 对象劫持 用户改变了对象，我希望可以得到通知 刷新页面\n  // MVVM 数据变化驱动视图变化\n  observe(data) // \n\n}\nfunction initComputed(){}\nfunction initWatch(){}\n\n\n\n\n","import { initState } from './state'\n\nexport function initMixin(Vue){\n  // 初始化流程\n  Vue.prototype._init = function (options) {\n    // console.log(options)\n    \n    // 数据劫持\n    const vm = this;\n    vm.$options = options\n\n    initState(vm) // 分割代码\n  };\n}","// vue 核心源码 ， 只是 vue 的一个声明\n\nimport {initMixin } from './init'\n\nfunction Vue(options){\n  // 进行 vue 的初始化\n  this._init(options)\n}\n\n// 通过引入文件的方式 给 vue 原型上添加方法\ninitMixin(Vue)\n\n\nexport default Vue"],"names":["isObject","data","Observe","value","walk","keys","Object","forEach","key","defineReactive","observe","defineProperty","get","set","newValue","console","log","isObj","initState","vm","opts","$options","props","methods","initData","computed","watch","call","_data","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,QAAT,CAAmBC,IAAnB,EAAwB;EAC7B,SAAO,QAAOA,IAAP,MAAgB,QAAhB,IAA4BA,IAAI,KAAK,MAA5C;EACD;;MCCKC;EACJ,mBAAYC,KAAZ,EAAkB;EAAA;;EAChB;EACA;EACA,SAAKC,IAAL,CAAUD,KAAV;EACD;;;;2BAEIF,MAAK;EACR,UAAII,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYJ,IAAZ,CAAX;EACAI,MAAAA,IAAI,CAACE,OAAL,CAAa,UAAAC,GAAG,EAAI;EAClBC,QAAAA,cAAc,CAACR,IAAD,EAAOO,GAAP,EAAYP,IAAI,CAACO,GAAD,CAAhB,CAAd;EACD,OAFD;EAGD;;;;;;EAGH,SAASC,cAAT,CAAwBR,IAAxB,EAA8BO,GAA9B,EAAmCL,KAAnC,EAAyC;EACvCO,EAAAA,OAAO,CAACP,KAAD,CAAP,CADuC;;EAEtCG,EAAAA,MAAM,CAACK,cAAP,CAAsBV,IAAtB,EAA4BO,GAA5B,EAAiC;EAC/BI,IAAAA,GAD+B,iBAC1B;EACJ,aAAOT,KAAP;EACA,KAH8B;EAI/BU,IAAAA,GAJ+B,eAI3BC,QAJ2B,EAIlB;EACV,UAAGA,QAAQ,KAAKX,KAAhB,EAAuB;EACvBO,MAAAA,OAAO,CAACI,QAAD,CAAP,CAFU;;EAGVC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;EACAb,MAAAA,KAAK,GAAGW,QAAR;EACF;EAT8B,GAAjC;EAWF;;EAGM,SAASJ,OAAT,CAAiBT,IAAjB,EAAsB;EAC3B,MAAIgB,KAAK,GAAGjB,QAAQ,CAACC,IAAD,CAApB;;EACA,MAAG,CAACgB,KAAJ,EAAU;EACR;EACD;;EAED,SAAO,IAAIf,OAAJ,CAAYD,IAAZ,CAAP;EAED;;ECxCM,SAASiB,SAAT,CAAmBC,EAAnB,EAAsB;EAC3B,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB,CAD2B;EAG3B;;EACA,MAAGD,IAAI,CAACE,KAAR,EAAc;;EAGd,MAAGF,IAAI,CAACG,OAAR,EAAgB;;EAGhB,MAAGH,IAAI,CAACnB,IAAR,EAAa;EACXuB,IAAAA,QAAQ,CAACL,EAAD,CAAR;EACD;;EACD,MAAGC,IAAI,CAACK,QAAR,EAAiB;;EAGjB,MAAGL,IAAI,CAACM,KAAR,EAAc;EAGf;;EAID,SAASF,QAAT,CAAkBL,EAAlB,EAAqB;EACnB;EACA,MAAIlB,IAAI,GAAGkB,EAAE,CAACE,QAAH,CAAYpB,IAAvB;EACAA,EAAAA,IAAI,GAAG,OAAOA,IAAP,IAAe,UAAf,GAA4BA,IAAI,CAAC0B,IAAL,CAAUR,EAAV,CAA5B,GAA4ClB,IAAnD;EACAkB,EAAAA,EAAE,CAACS,KAAH,GAAW3B,IAAX,CAJmB;EAMnB;;EACAS,EAAAA,OAAO,CAACT,IAAD,CAAP,CAPmB;EASpB;;EChCM,SAAS4B,SAAT,CAAmBC,GAAnB,EAAuB;EAC5B;EACAA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACvC;EAEA;EACA,QAAMd,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcY,OAAd;EAEAf,IAAAA,SAAS,CAACC,EAAD,CAAT,CAPuC;EAQxC,GARD;EASD;;ECbD;;EAIA,SAASW,GAAT,CAAaG,OAAb,EAAqB;EACnB;EACA,OAAKD,KAAL,CAAWC,OAAX;EACD;;;EAGDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}